
{% extends "base.html" %}

{% block title %}Settings - Advanced Bots Creator{% endblock %}

{% block content %}
<div class="landing-page-v2 min-vh-100">
    <div class="container px-3 py-4">
        <div class="row mb-4 fade-in-up">
            <div class="col">
                <h2 class="gradient-text display-5 fw-bold"><i class="bi bi-gear"></i> Settings</h2>
                <p class="hero-subtitle">Manage your account and preferences</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="feature-card mb-4 fade-in-up" style="animation-delay: 0.1s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-person"></i> Account Information</h5>
                    <div class="mb-3">
                        <label class="form-label">Username</label>
                        <input type="text" class="form-control" value="{{ user.username }}" readonly style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); color: white;">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">User ID</label>
                        <input type="text" class="form-control" value="{{ user.id }}" readonly style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); color: white;">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Plan</label>
                        <input type="text" class="form-control" value="{{ user.plan|capitalize }}" readonly style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); color: white;">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Referral Code</label>
                        <div class="input-group">
                            <input type="text" class="form-control" value="{{ user.referral_code }}" readonly style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); color: white;">
                            <button class="btn btn-outline-light" onclick="navigator.clipboard.writeText('{{ user.referral_code }}')">
                                <i class="bi bi-clipboard"></i> Copy
                            </button>
                        </div>
                    </div>
                </div>

                <div class="feature-card mb-4 fade-in-up" style="animation-delay: 0.2s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-wallet-fill text-warning"></i> TON Wallet for Mining Bots</h5>
                    <div class="alert alert-info mb-3" style="background: rgba(13, 110, 253, 0.1); border: 1px solid rgba(13, 110, 253, 0.3); color: #66b3ff;">
                        <i class="bi bi-info-circle-fill"></i> <strong>Important:</strong> Configure your TON wallet to receive payments from mining bots.
                    </div>
                    
                    {% if user.wallet_address %}
                    <div class="card mb-3" style="background: rgba(40, 167, 69, 0.1); border: 1px solid rgba(40, 167, 69, 0.3);">
                        <div class="card-body">
                            <h6 class="text-success"><i class="bi bi-check-circle"></i> TON Wallet Connected</h6>
                            <p class="text-white mb-2" style="font-family: monospace; font-size: 0.9rem;">
                                {{ user.wallet_address[:8] }}...{{ user.wallet_address[-8:] }}
                            </p>
                            <small class="text-white-50">Receiving payments from your mining bots</small>
                        </div>
                    </div>
                    {% else %}
                    <div class="alert alert-warning" style="background: rgba(255, 193, 7, 0.1); border: 1px solid rgba(255, 193, 7, 0.3);">
                        <i class="bi bi-exclamation-triangle"></i> No TON wallet configured. Set one up to receive payments!
                    </div>
                    {% endif %}
                    
                    <a href="{{ url_for('ton_wallet_settings') }}" class="btn btn-primary-gradient w-100">
                        <i class="bi bi-wallet2"></i> Manage TON Wallet Settings
                    </a>
                </div>

                <div class="feature-card mb-4 fade-in-up" style="animation-delay: 0.25s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-globe"></i> Other Web3 Settings</h5>
                    <form method="POST">
                        <div class="mb-3">
                            <label for="wallet_address" class="form-label">General Wallet Address (Optional)</label>
                            <input type="text" class="form-control" id="wallet_address" name="wallet_address" 
                                   value="{{ user.wallet_address or '' }}" 
                                   placeholder="0x..." style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.2); color: white;">
                            <div class="form-text text-white-50">Connect other crypto wallet addresses (ETH, BNB, etc.)</div>
                        </div>
                        <button type="submit" class="btn btn-outline-light">
                            <i class="bi bi-check"></i> Save Changes
                        </button>
                    </form>
                </div>

                <div class="feature-card fade-in-up" style="animation-delay: 0.3s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-robot"></i> AI Integration</h5>
                    <p>
                        <strong class="text-white">Status:</strong> 
                        {% if ai_available %}
                        <span class="badge bg-success">Active</span>
                        {% else %}
                        <span class="badge bg-warning">Not Configured</span>
                        {% endif %}
                    </p>
                    {% if not ai_available %}
                    <div class="alert" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white;">
                        <i class="bi bi-info-circle"></i>
                        To enable AI features, please add your Gemini API key as an environment variable.
                    </div>
                    {% endif %}
                    <p class="mb-0 text-white-50">
                        AI-powered features include automatic response generation, intent detection, and smart command suggestions.
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="feature-card mb-4 fade-in-up" style="animation-delay: 0.4s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-palette"></i> Theme</h5>
                    <p class="text-white-50">Current theme: <span id="currentTheme">Dark</span></p>
                    <button class="btn btn-outline-light w-100" id="themeTogglePage">
                        <i class="bi bi-moon-stars"></i> Toggle Theme
                    </button>
                </div>

                <div class="feature-card mb-4 fade-in-up" style="animation-delay: 0.5s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-star"></i> Upgrade Plan</h5>
                    {% if user.plan == 'free' %}
                    <h6 class="text-white">Free Plan</h6>
                    <ul class="text-white-50">
                        <li>1 bot maximum</li>
                        <li>Basic templates</li>
                        <li>Standard analytics</li>
                    </ul>
                    <hr style="border-color: rgba(255,255,255,0.2);">
                    <h6 class="text-white">Pro Plan</h6>
                    <ul class="text-white-50">
                        <li>Unlimited bots</li>
                        <li>All templates</li>
                        <li>Advanced analytics</li>
                        <li>Web3 features</li>
                        <li>Priority support</li>
                    </ul>
                    <button class="btn btn-primary-gradient w-100" disabled>
                        <i class="bi bi-star-fill"></i> Upgrade to Pro (Coming Soon)
                    </button>
                    {% else %}
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle"></i> You're on the Pro plan!
                    </div>
                    {% endif %}
                </div>

                <div class="feature-card fade-in-up" style="animation-delay: 0.6s;">
                    <h5 class="gradient-text mb-4"><i class="bi bi-info-circle"></i> Help & Support</h5>
                    <p class="text-white-50">Need help? Check out these resources:</p>
                    <div class="d-grid gap-2">
                        <a href="#" class="btn btn-outline-light btn-sm">
                            <i class="bi bi-book"></i> Documentation
                        </a>
                        <a href="#" class="btn btn-outline-light btn-sm">
                            <i class="bi bi-chat"></i> Support
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Floating Elements -->
    <div class="floating-element floating-1">
        <i class="bi bi-gear"></i>
    </div>
    <div class="floating-element floating-2">
        <i class="bi bi-stars"></i>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.getElementById('themeTogglePage')?.addEventListener('click', function() {
    const html = document.documentElement;
    const currentTheme = html.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    html.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    document.getElementById('currentTheme').textContent = newTheme.charAt(0).toUpperCase() + newTheme.slice(1);
});
</script>
{% endblock %}
